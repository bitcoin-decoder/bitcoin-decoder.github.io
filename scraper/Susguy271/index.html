<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search & Analyze</title>
</head>
<body>
    <h1>Funny Word Search & Analyze</h1>

    <!-- Input box for the search query -->
    <label for="searchQuery">Enter your search query:</label>
    <input type="text" id="searchQuery" placeholder="e.g., banana dinosaur spaghetti" style="width: 300px;" />
    <button id="searchButton">Search</button>

    <h2>Results</h2>
    <div id="results"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/tesseract.js/4.0.2/tesseract.min.js"></script>
    <script>
        // Function to perform a DuckDuckGo search via API
        async function searchDuckDuckGo(query) {
            const apiUrl = `https://api.duckduckgo.com/?q=${encodeURIComponent(query)}&format=json&pretty=1`;
            try {
                const response = await fetch(apiUrl);
                const data = await response.json();
                return data.RelatedTopics.map(topic => topic.FirstURL || topic.Icon.URL).filter(Boolean);
            } catch (error) {
                console.error('Error fetching search results:', error);
                return [];
            }
        }

        // Function to analyze image text using Tesseract.js
        async function analyzeImage(url) {
            try {
                const { data: { text } } = await Tesseract.recognize(url, 'eng');
                return text;
            } catch (error) {
                console.error('Error analyzing image:', error);
                return '';
            }
        }

        // Function to process search results and extract text or funny phrases
        async function processResults(results) {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = ''; // Clear previous results

            for (const result of results) {
                if (result.endsWith('.jpg') || result.endsWith('.png')) {
                    // Analyze image URLs
                    const extractedText = await analyzeImage(result);
                    const funnyPhrases = findFunnySequences(extractedText);
                    resultsDiv.innerHTML += `<h3>Image: <a href="${result}" target="_blank">${result}</a></h3><p>${funnyPhrases.join('<br>')}</p>`;
                } else {
                    // List non-image URLs
                    resultsDiv.innerHTML += `<h3>Website: <a href="${result}" target="_blank">${result}</a></h3>`;
                }
            }
        }

        // Function to find funny sequences in text
        function findFunnySequences(text) {
            const sentences = text.match(/\b(\w+\s+){4}\w+\b/g) || [];
            const funnyWords = ['banana', 'pickle', 'unicorn', 'spaghetti', 'dinosaur']; // Example funny keywords
            return sentences.filter(sentence => funnyWords.some(word => sentence.includes(word)));
        }

        // Event listener for the search button
        document.getElementById('searchButton').addEventListener('click', async () => {
            const query = document.getElementById('searchQuery').value.trim();
            if (!query) {
                alert('Please enter a search query!');
                return;
            }

            const results = await searchDuckDuckGo(query);
            await processResults(results);
        });
    </script>
</body>
</html>
